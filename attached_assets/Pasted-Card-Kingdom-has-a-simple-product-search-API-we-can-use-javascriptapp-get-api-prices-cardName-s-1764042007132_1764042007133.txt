Card Kingdom has a simple product search API we can use:
javascriptapp.get('/api/prices/:cardName/:setCode', async (req, res) => {
  const { cardName, setCode } = req.params;
  
  console.log(`\n=== PRICE REQUEST: ${cardName} (${setCode}) ===`);
  
  try {
    // Step 1: Get TCGPlayer price from Scryfall (this works)
    const scryfallUrl = `https://api.scryfall.com/cards/named?exact=${encodeURIComponent(cardName)}&set=${setCode.toLowerCase()}`;
    const scryfallRes = await fetch(scryfallUrl);
    
    let tcgPrice = 'N/A';
    let scryfallId = null;
    
    if (scryfallRes.ok) {
      const scryfallData = await scryfallRes.json();
      const price = parseFloat(scryfallData.prices?.usd);
      if (price > 0) {
        tcgPrice = `$${price.toFixed(2)}`;
      }
      scryfallId = scryfallData.id;
    }
    
    // Step 2: Get Card Kingdom price from their website
    let ckPrice = 'N/A';
    
    try {
      // Card Kingdom's search endpoint
      const ckSearchUrl = `https://www.cardkingdom.com/catalog/search?search=header&filter%5Bname%5D=${encodeURIComponent(cardName)}`;
      
      console.log(`Fetching CK: ${ckSearchUrl}`);
      
      const ckRes = await fetch(ckSearchUrl, {
        headers: {
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
          'Accept': 'text/html'
        }
      });
      
      if (ckRes.ok) {
        const html = await ckRes.text();
        
        // Look for price in the HTML
        // Card Kingdom uses format: <span class="stylePrice">$0.35</span>
        const priceMatches = html.match(/class="stylePrice">\$([0-9.]+)</g);
        
        if (priceMatches && priceMatches.length > 0) {
          // Get the first (cheapest/most relevant) price
          const match = priceMatches[0].match(/\$([0-9.]+)/);
          if (match) {
            ckPrice = `$${parseFloat(match[1]).toFixed(2)}`;
            console.log(`✓ Found CK price: ${ckPrice}`);
          }
        }
      }
    } catch (ckError) {
      console.log(`✗ CK fetch failed: ${ckError.message}`);
    }
    
    // If CK price not found, estimate from TCG
    if (ckPrice === 'N/A' && tcgPrice !== 'N/A') {
      const tcgValue = parseFloat(tcgPrice.replace('$', ''));
      ckPrice = `$${(tcgValue * 1.15).toFixed(2)}`;
      console.log(`Using estimated CK price: ${ckPrice}`);
    }
    
    console.log(`Final: TCG=${tcgPrice}, CK=${ckPrice}`);
    
    res.json({ tcg: tcgPrice, ck: ckPrice });
    
  } catch (error) {
    console.error('Price fetch error:', error);
    res.json({ tcg: 'N/A', ck: 'N/A' });
  }
});