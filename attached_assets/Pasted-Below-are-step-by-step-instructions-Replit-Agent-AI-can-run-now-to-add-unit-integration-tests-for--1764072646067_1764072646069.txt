Below are step-by-step instructions Replit Agent AI can run now to add unit & integration tests for the pricing flow, plus ready-to-paste test files. Follow the commands in order, then run the tests and paste the results under “Replit Agent:”.

Important notes before running

The test files assume these exports/paths exist:
PriceCacheProvider is exported from src/context/PriceCacheContext
usePriceCache is a hook exported from the same file (used by internal callers)
DecklistCardPrice component lives at src/components/DecklistCardPrice.jsx
If your project uses different filenames/exports, adjust the import paths in the test files accordingly (I included comments where to change them).
Install testing dependencies Run in the Replit workspace terminal:
bash
# install test runner + testing libs + msw for request mocking
npm install -D vitest @testing-library/react @testing-library/jest-dom jsdom msw
# add vitest to package.json test script (or edit package.json manually)
# using npm pkg (safer than overwriting package.json)
npm pkg set scripts.test="vitest"
Add test/support files Create the two test files and a small msw server setup. Paste each block below into the corresponding file path.

tests/PriceCacheContext.test.jsx
import React from "react";
import { render, waitFor } from "@testing-library/react";
import { rest } from "msw";
import { setupServer } from "msw/node";
import { PriceCacheProvider } from "../src/context/PriceCacheContext"; // adjust path if needed
import { usePriceCache } from "../src/context/PriceCacheContext"; // adjust if hook export differs

tests/DecklistCardPrice.test.jsx
import React from "react";
import { render, screen } from "@testing-library/react";
import { rest } from "msw";
import { setupServer } from "msw/node";
import { PriceCacheProvider } from "../src/context/PriceCacheContext"; // adjust path if needed
import DecklistCardPrice from "../src/components/DecklistCardPrice"; // adjust path if needed
Run tests locally Run:
bash
npm ci
npm run test
Vitest will pick up tests under /tests by default. If Vitest doesn't pick up .jsx files, add a vitest config or rename to .test.jsx — this layout generally works with default vitest + Vite projects.

What to do if imports differ
If PriceCacheProvider or DecklistCardPrice are in different paths, update the import lines at the top of the test files accordingly.
If usePriceCache hook is a default export or a different name, alter the import in PriceCacheContext.test.jsx.
Add tests to CI
Update your .github/workflows/ci.yml to run tests. Example step (insert before build):
YAML
- name: Run tests
  run: npm ci && npm run test
Commit & push test code (create branch) Run:
bash
git checkout -b test/add-pricing-flow-tests
git add tests/PriceCacheContext.test.jsx tests/DecklistCardPrice.test.jsx package.json
git commit -m "test: add unit/integration tests for price cache and DecklistCardPrice"
git push -u origin test/add-pricing-flow-tests