Debug: See What Card Kingdom Actually Returns
First, let's add debugging to see the actual HTML structure:
javascriptapp.get('/api/prices/:cardName/:setCode', async (req, res) => {
  const { cardName, setCode } = req.params;
  
  console.log(`\n=== PRICE REQUEST: ${cardName} (${setCode}) ===`);
  
  try {
    // Step 1: Get TCGPlayer price from Scryfall
    const scryfallUrl = `https://api.scryfall.com/cards/named?exact=${encodeURIComponent(cardName)}&set=${setCode.toLowerCase()}`;
    const scryfallRes = await fetch(scryfallUrl);
    
    let tcgPrice = 'N/A';
    let setName = '';
    
    if (scryfallRes.ok) {
      const scryfallData = await scryfallRes.json();
      const price = parseFloat(scryfallData.prices?.usd);
      if (price > 0) {
        tcgPrice = `$${price.toFixed(2)}`;
      }
      setName = scryfallData.set_name;
      console.log(`Scryfall: ${scryfallData.name} [${scryfallData.set_name}] - TCG: ${tcgPrice}`);
    }
    
    // Step 2: Get Card Kingdom price
    let ckPrice = 'N/A';
    
    try {
      // Add set name to search to get more specific results
      const searchTerm = setName ? `${cardName} ${setName}` : cardName;
      const ckSearchUrl = `https://www.cardkingdom.com/catalog/search?search=header&filter%5Bname%5D=${encodeURIComponent(searchTerm)}`;
      
      console.log(`Fetching CK: ${ckSearchUrl}`);
      
      const ckRes = await fetch(ckSearchUrl, {
        headers: {
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
          'Accept': 'text/html'
        }
      });
      
      if (ckRes.ok) {
        const html = await ckRes.text();
        
        // DEBUG: Log a sample of the HTML to see the structure
        console.log('\n=== CK HTML SAMPLE (first 2000 chars) ===');
        console.log(html.substring(0, 2000));
        console.log('=== END SAMPLE ===\n');
        
        // Try multiple price patterns
        const patterns = [
          /class="stylePrice">\$([0-9.]+)/g,
          /price["\s:]+\$?([0-9]+\.[0-9]{2})/gi,
          /"price":\s*"?\$?([0-9]+\.[0-9]{2})"?/gi,
          /\$([0-9]+\.[0-9]{2})/g
        ];
        
        let allPrices = [];
        
        for (const pattern of patterns) {
          const matches = [...html.matchAll(pattern)];
          if (matches.length > 0) {
            console.log(`Pattern matched ${matches.length} prices:`, matches.map(m => m[1]));
            allPrices = allPrices.concat(matches.map(m => parseFloat(m[1])));
          }
        }
        
        if (allPrices.length > 0) {
          // Remove duplicates and sort
          allPrices = [...new Set(allPrices)].sort((a, b) => a - b);
          console.log('All unique prices found:', allPrices);
          
          // Use the median price (more reliable than min/max)
          const medianPrice = allPrices[Math.floor(allPrices.length / 2)];
          ckPrice = `$${medianPrice.toFixed(2)}`;
          console.log(`✓ Selected CK price (median): ${ckPrice}`);
        }
      }
    } catch (ckError) {
      console.log(`✗ CK fetch failed: ${ckError.message}`);
    }
    
    // Fallback to estimate
    if (ckPrice === 'N/A' && tcgPrice !== 'N/A') {
      const tcgValue = parseFloat(tcgPrice.replace('$', ''));
      ckPrice = `$${(tcgValue * 1.15).toFixed(2)}`;
      console.log(`Using estimated CK price: ${ckPrice}`);
    }
    
    console.log(`Final result: TCG=${tcgPrice}, CK=${ckPrice}\n`);
    
    res.json({ tcg: tcgPrice, ck: ckPrice });
    
  } catch (error) {
    console.error('Price fetch error:', error);
    res.json({ tcg: 'N/A', ck: 'N/A' });
  }
});
Test and Share the Debug Output

Restart your server with this updated code
Make a request for one of your test cards:

bash   curl "http://localhost:5000/api/prices/Lightning%20Bolt/2X2"

Share the debug output showing:

The CK HTML sample
What prices were found
Which pattern matched



Alternative: Use Card Kingdom's Direct Product URL
If their search is unreliable, we can try constructing direct product URLs:
javascript// Card Kingdom uses URL format: /mtg/[set-name]/[card-name]
const ckDirectUrl = `https://www.cardkingdom.com/mtg/${setName.toLowerCase().replace(/\s+/