In the /api/inventory POST endpoint (line 609), the quantity parameter has a fallback of || 1:
javascriptapp.post('/api/inventory', async (req, res) => {
  const { name, set, set_name, quantity, purchase_price, purchase_date, image_url, reorder_type } = req.body;
  
  try {
    const result = await pool.query(
      `INSERT INTO inventory 
       (name, set, set_name, quantity, purchase_price, purchase_date, image_url, reorder_type, created_at) 
       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, NOW()) 
       RETURNING *`,
      [
        name, 
        set, 
        set_name || null,
        quantity || 1,  // ← HERE'S THE PROBLEM
        purchase_price || null, 
        purchase_date || new Date().toISOString().split('T')[0],
        image_url || null,
        reorder_type || 'normal'
      ]
    );
Why This Causes Issues
The expression quantity || 1 has a critical JavaScript gotcha:

If quantity is 0, it's falsy, so it becomes 1
But more importantly, if the frontend sends quantity as a string (like "21"), then "21" || 1 evaluates to "21" (which is fine)
However, if there's any issue with type coercion or if quantity somehow becomes 0 during processing, it gets replaced with 1

The Real Issue: Database Type Mismatch
Looking more carefully, the problem might be that PostgreSQL expects an INTEGER but is receiving a string or having precision issues. When you insert "21" into a PostgreSQL INTEGER column, if there's any whitespace or formatting issue, it could:

Partially parse the number
Trigger an error that's silently caught
Fall back to the default

The Fix
Replace line 621 with:
javascriptparseInt(quantity, 10) || 1,
But more importantly, add proper validation:Fixed server.js POST /api/inventory endpointCode app.post('/api/inventory', async (req, res) => {
  const { name, set, set_name, quantity, purchase_price, purchase_date, image_url, reorder_type } = req.body;
  
  // VALIDATION: Ensure quantity is a valid positive integer
  const parsedQuantity = paAdditional Fix Needed
There's also a similar issue in the purchase_history insertion (line 632). Notice it uses qty which is undefined:
javascriptconst qty = quantity || 1;  // This should be parsedQuantity
Summary of Changes

Parse quantity to integer before using it
Validate quantity is a positive integer
Add logging to track what's being inserted vs. what's saved
Return validation errors so the frontend knows when bad data is sent
Use the parsed quantity consistently in both inventory and purchase_history inserts

How to Test
After applying the fix, try adding cards again and check:

The console logs will show exactly what quantity is being inserted
If there's a mismatch, you'll see the error logged
The API will reject invalid quantities with a clear error message

The issue was that quantity || 1 wasn't safely handling the value, and there was no validation to catch when something went wrong during the database insertion.