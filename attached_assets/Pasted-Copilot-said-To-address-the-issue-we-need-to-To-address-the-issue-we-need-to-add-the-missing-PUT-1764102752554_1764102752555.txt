Copilot said: To address the issue, we need to
To address the issue, we need to add the missing PUT /api/inventory/:id endpoint in the backend. Below is the implementation plan and the code that you can copy into server.js.

Steps to Add the Missing Endpoint
Define the PUT Handler:

Add an endpoint for PUT /api/inventory/:id.
Use the id from the URL to identify the inventory item to update.
Accept updated values for quantity, purchase_price, purchase_date, and reorder_type from the request body.
Validate Input:

Ensure quantity is a positive integer.
Validate purchase_price as a non-negative numeric value.
Ensure purchase_date matches an acceptable date format (ISO 8601).
Validate reorder_type as a valid string.
Update the Inventory Record:

Use SQL to update the inventory table for the specified id.
Error Handling:

Return 404 if the inventory item does not exist.
Handle invalid input with appropriate 400 errors.
Log all errors and update attempts.
Return Updated Item:

Query the updated record and include it in the response.
PUT /api/inventory/:id Implementation
Hereâ€™s the code for the new endpoint:

JavaScript
// PUT /api/inventory/:id - Update an inventory item
app.put('/api/inventory/:id', (req, res) => {
    const { id } = req.params;
    const { quantity, purchase_price, purchase_date, reorder_type } = req.body;

    // Validate inputs
    if (!Number.isInteger(quantity) || quantity <= 0) {
        return res.status(400).send({ error: "Quantity must be a positive integer." });
    }
    if (purchase_price < 0 || isNaN(purchase_price)) {
        return res.status(400).send({ error: "Purchase price must be a non-negative number." });
    }
    if (!Date.parse(purchase_date)) {
        return res.status(400).send({ error: "Invalid purchase date." });
    }
    if (typeof reorder_type !== "string" || reorder_type.trim() === "") {
        return res.status(400).send({ error: "Reorder type must be a valid string." });
    }

    // SQL query to update the inventory record
    const query = `
        UPDATE inventory
        SET quantity = ?,
            purchase_price = ?,
            purchase_date = ?,
            reorder_type = ?
        WHERE id = ?
    `;

    // Run the update
    db.run(
        query,
        [quantity, purchase_price, purchase_date, reorder_type, id],
        function (err) {
            if (err) {
                console.error("[ERROR] Failed to update inventory item:", err);
                return res.status(500).send({ error: "Failed to update inventory item." });
            }

            if (this.changes === 0) {
                // No rows were updated
                return res.status(404).send({ error: "Inventory item not found." });
            }

            // Fetch and return the updated record
            db.get(
                "SELECT * FROM inventory WHERE id = ?",
                [id],
                (err, updatedItem) => {
                    if (err) {
                        console.error("[ERROR] Failed to fetch updated item:", err);
                        return res.status(500).send({ error: "Failed to fetch updated inventory item." });
                    }

                    console.log(`[UPDATE] Inventory item updated: id=${id}, changes:`, updatedItem);
                    res.status(200).send(updatedItem);
                }
            );
        }
    );
});
How This Code Works
Input Validation:

Ensures all fields are valid, following the expected types and constraints.
Rejects invalid updates early with 400 Bad Request.
SQL Update Operation:

Updates the inventory table for the specified record based on the id.
Ensures only valid updates are applied.
Fetch Updated Record:

After successfully updating the record, retrieves the new data (ensures the response includes exactly whatâ€™s in the database).
Error Handling:

Handles cases where the row doesn't exist (404 Not Found).
Logs and returns 500 Internal Server Error for unexpected database failures.
Logs:

Logs the update operation for debugging and auditing purposes.
Testing the Endpoint
Test Cases to Verify:
Valid Update:

Send a PUT request with valid data and verify the response includes updated fields.
Example:
bash
curl -X PUT "http://localhost:3000/api/inventory/1" \
    -H "Content-Type: application/json" \
    -d '{"quantity": 5, "purchase_price": 2.50, "purchase_date": "2025-11-30", "reorder_type": "normal"}'
Invalid Input:

Test invalid cases (e.g., negative quantity, invalid purchase_price, bad purchase_date, empty reorder_type).
Expected Response: 400 Bad Request with appropriate error message.
Non-Existent Record:

Try updating an id that doesnâ€™t exist.
Expected Response: 404 Not Found.
Database Failures:

Simulate database errors using triggered limitations (e.g., locked rows, invalid schema).
Verify the response gracefully handles these errors (500 Internal Server Error).
Result Once Fixed
With this endpoint in place:

Users can edit inventory cards directly in the frontend.
Updated values for quantity, price, date, or reorder type will persist immediately.
Errors (e.g., invalid input, missing record) will return appropriate messages.
Let me know if you need assistance setting up tests or verifying this implementation! ðŸš€