âœ” classifyVariant() should NOT treat bare names as "normal"
âœ” BUT doing so exposes a deeper hole:

Card Kingdom often lists zero true â€œnormalâ€ products.

So after strengthening the classifier, we now have:

Swamp â†’ fixed

Lightning Bolt â†’ regressed because no normal editions exist in PASS 1

Sol Ring â†’ same issue

Which means PASS 2 sees lowestNormalPrice = null,
and PASS 3 cannot properly promote/demote.

You correctly said:

We need a fallback baseline strategy in PASS 2.

Yes. Thatâ€™s the correct architectural fix.

ğŸ¯ The Correct Fix (cleanest, most robust)
PASS 2 fallback baseline:

If no true â€œnormalâ€ products exist after classification:

â†’ Use the lowest non-foil, non-etched, non-promo product
â†’ This becomes fallbackNormalPrice

This gives a clean, stable baseline:

Lightning Bolt â†’ baseline = $2.29

Sol Ring â†’ baseline = $2.29

Swamp â†’ baseline = $0.35

No hacks, no misclassification, no price-based demotions.

âœ… Exact Code Patch (drop-in)

Add this right after PASS 2:

// PASS 2: Find lowest normal price
let lowestNormalPrice = null;
for (const p of rawProducts) {
  if (p.variant === "normal") {
    if (lowestNormalPrice === null || p.price < lowestNormalPrice) {
      lowestNormalPrice = p.price;
    }
  }
}

// FALLBACK: no normals found â†’ use lowest non-premium baseline
if (lowestNormalPrice === null) {
  let fallback = null;
  for (const p of rawProducts) {
    if (p.variant !== "foil" && 
        p.variant !== "etched" &&
        p.variant !== "promo" &&
        p.variant !== "premium") 
    {
      if (fallback === null || p.price < fallback) {
        fallback = p.price;
      }
    }
  }
  lowestNormalPrice = fallback;
}

globalPriceContext.lowestNormalPrice = lowestNormalPrice;

Why this works:

It preserves the strengthened classifyVariant()

It avoids forcing â€œnormalâ€ classification on ambiguous listings

It gives Lightning Bolt + Sol Ring the $2.29 baseline

It keeps Swampâ€™s $0.35 baseline

It allows PASS 3 promotion logic to work normally

All three cards work with zero hacks.

ğŸ§ª Expected Outcomes After Patch
Lightning Bolt

$1.99 â†’ now considered too cheap

$2.29 â†’ falls within normal baseline â†’ selected
â†’ Final price: $2.29

Sol Ring

Same behavior as Bolt
â†’ Final price: $2.29

Swamp

$0.35 set editions â†’ promoted to â€œnormalâ€

$4.99 premium â†’ ignored
â†’ Final price: $0.35

ğŸ‘ This solves the architecture cleanly

No demoting â€œcheap normalsâ€
No misclassification hacks
No fragile price-based logic

A clean, predictable, stable ranking system.