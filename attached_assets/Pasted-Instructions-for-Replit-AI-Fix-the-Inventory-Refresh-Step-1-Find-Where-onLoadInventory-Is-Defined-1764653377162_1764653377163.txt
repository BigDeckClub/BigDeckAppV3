Instructions for Replit AI: Fix the Inventory Refresh
Step 1: Find Where onLoadInventory Is Defined
It's likely in App.jsx or a parent component. Search for where the loadInventory or onLoadInventory function is defined and passed to InventoryTab.

Step 2: Add Debug Logging to Confirm It's Called
Find the function definition and add logging:

JavaScript
const loadInventory = async () => {
  console.log('=== LOAD INVENTORY CALLED ===');
  try {
    const response = await fetch('/api/inventory');
    const data = await response. json();
    console.log('Inventory loaded, total items:', data.length);
    
    // Check item 6's alert status
    const item6 = data.find(i => i.id === 6);
    console.log('Item 6 low_inventory_alert:', item6?.low_inventory_alert);
    
    setInventory(data);  // This should trigger re-render
    console.log('setInventory called');
  } catch (error) {
    console.error('Error loading inventory:', error);
  }
};
Step 3: Check If the Issue Is Memoization
File: src/components/inventory/CardGroup.jsx

The component uses memo():

JavaScript
export const CardGroup = memo(function CardGroup({ ...  })
The problem: React's memo prevents re-renders if props look the same by reference. When inventory refreshes, the items array might be a new array with the same item objects, causing React to skip re-rendering.

Step 4: The Fix - Force Re-render on Alert Change
Option A: Update the memo comparison (in CardGroup.jsx):

JavaScript
export const CardGroup = memo(function CardGroup({
  // ... props
}) {
  // ...  component code
}, (prevProps, nextProps) => {
  // Custom comparison - re-render if any item's low_inventory_alert changed
  const prevAlerts = prevProps. items.map(i => i.low_inventory_alert). join(',');
  const nextAlerts = nextProps.items.map(i => i.low_inventory_alert). join(',');
  
  if (prevAlerts !== nextAlerts) return false; // Force re-render
  
  // Default shallow comparison for other props
  return (
    prevProps.cardName === nextProps.cardName &&
    prevProps.viewMode === nextProps.viewMode &&
    prevProps.items. length === nextProps. items.length &&
    prevProps.editingId === nextProps. editingId
  );
});