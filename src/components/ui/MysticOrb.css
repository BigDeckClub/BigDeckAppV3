/* MysticOrb.css - Ethereal Crystal Ball aesthetic */

/* Container wrapper */
.orb-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  gap: 2rem;
  animation: fadeIn 0.5s ease-out;
}

/* ============================================
   COLOR THEMES (NEBULA / BLACK HOLE)
   ============================================ */

/* Register properties for smooth gradient interpolation */
@property --orb-bg-1 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --orb-bg-2 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --orb-bg-3 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --cloud-1 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --cloud-2 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --cloud-dark {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --mist-1 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --mist-2 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --lightning-1 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --lightning-2 {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

/* Added variables for outer shell/aura matching */
@property --glass-border {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --glass-glow {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

@property --aura-color {
  syntax: '<color>';
  inherits: true;
  initial-value: transparent;
}

.orb-container {
  /* Default (Blue/Sapphire Nebula) */
  --orb-bg-1: rgba(20, 40, 80, 0.4);
  --orb-bg-2: rgba(10, 20, 50, 0.8);
  --orb-bg-3: rgba(5, 10, 20, 0.98);

  --cloud-1: rgba(100, 180, 255, 0.2);
  --cloud-2: rgba(50, 100, 200, 0.15);
  --cloud-dark: rgba(2, 5, 15, 0.8);

  --mist-1: rgba(100, 200, 255, 0.2);
  --mist-2: rgba(50, 100, 180, 0.1);

  --lightning-1: rgba(180, 230, 255, 0.6);
  --lightning-2: rgba(100, 200, 255, 0.4);

  /* Outer Shell Colors */
  --glass-border: rgba(150, 200, 255, 0.3);
  --glass-glow: rgba(100, 180, 255, 0.4);
  --aura-color: rgba(60, 130, 220, 0.3);

  /* Slower transitions for hypnotic effect */
  transition:
    --orb-bg-1 5s ease, --orb-bg-2 5s ease, --orb-bg-3 5s ease,
    --cloud-1 5s ease, --cloud-2 5s ease, --cloud-dark 5s ease,
    --mist-1 5s ease, --mist-2 5s ease,
    --lightning-1 5s ease, --lightning-2 5s ease,
    --glass-border 5s ease, --glass-glow 5s ease, --aura-color 5s ease;
}

/* White (Quasar / Starlight) */
.orb-container.white {
  --orb-bg-1: rgba(80, 70, 50, 0.3);
  --orb-bg-2: rgba(40, 30, 10, 0.8);
  --orb-bg-3: rgba(10, 5, 0, 0.98);

  --cloud-1: rgba(255, 240, 200, 0.25);
  --cloud-2: rgba(200, 180, 120, 0.15);
  --cloud-dark: rgba(20, 15, 5, 0.8);

  --mist-1: rgba(255, 250, 220, 0.3);
  --mist-2: rgba(200, 180, 100, 0.15);

  --lightning-1: rgba(255, 250, 200, 0.7);
  --lightning-2: rgba(255, 220, 150, 0.5);

  --glass-border: rgba(255, 240, 150, 0.4);
  --glass-glow: rgba(255, 220, 100, 0.5);
  --aura-color: rgba(255, 200, 100, 0.3);
}

/* Black (Event Horizon / Void) */
.orb-container.black {
  --orb-bg-1: rgba(40, 20, 60, 0.3);
  --orb-bg-2: rgba(20, 5, 30, 0.9);
  --orb-bg-3: rgba(0, 0, 0, 1);

  --cloud-1: rgba(100, 50, 150, 0.15);
  --cloud-2: rgba(60, 20, 100, 0.1);
  --cloud-dark: rgba(10, 0, 20, 0.9);

  --mist-1: rgba(120, 80, 180, 0.15);
  --mist-2: rgba(80, 40, 120, 0.1);

  --lightning-1: rgba(160, 100, 255, 0.4);
  --lightning-2: rgba(120, 50, 200, 0.3);

  --glass-border: rgba(100, 80, 150, 0.3);
  --glass-glow: rgba(80, 40, 120, 0.4);
  --aura-color: rgba(60, 20, 100, 0.3);
}

/* Red (Accretion Disk) */
.orb-container.red {
  --orb-bg-1: rgba(80, 30, 20, 0.3);
  --orb-bg-2: rgba(50, 10, 5, 0.85);
  --orb-bg-3: rgba(20, 5, 0, 0.98);

  --cloud-1: rgba(255, 100, 50, 0.2);
  --cloud-2: rgba(180, 50, 20, 0.15);
  --cloud-dark: rgba(30, 5, 0, 0.85);

  --mist-1: rgba(255, 120, 80, 0.25);
  --mist-2: rgba(200, 60, 30, 0.15);

  --lightning-1: rgba(255, 150, 100, 0.6);
  --lightning-2: rgba(255, 80, 40, 0.5);

  --glass-border: rgba(255, 100, 80, 0.4);
  --glass-glow: rgba(255, 60, 20, 0.5);
  --aura-color: rgba(200, 50, 0, 0.3);
}

/* Green (Cosmic Dust) */
.orb-container.green {
  --orb-bg-1: rgba(20, 60, 40, 0.3);
  --orb-bg-2: rgba(5, 30, 15, 0.85);
  --orb-bg-3: rgba(0, 10, 5, 0.98);

  --cloud-1: rgba(100, 255, 150, 0.2);
  --cloud-2: rgba(50, 180, 100, 0.15);
  --cloud-dark: rgba(0, 20, 10, 0.85);

  --mist-1: rgba(120, 255, 180, 0.25);
  --mist-2: rgba(50, 200, 120, 0.15);

  --lightning-1: rgba(150, 255, 200, 0.6);
  --lightning-2: rgba(100, 220, 150, 0.5);

  --glass-border: rgba(100, 255, 150, 0.4);
  --glass-glow: rgba(50, 200, 100, 0.5);
  --aura-color: rgba(0, 150, 80, 0.2);
}


/* Main orb container */
.orb-container {
  position: relative;
  width: 200px;
  height: 200px;
  cursor: pointer;
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  perspective: 1000px;
  transform-style: preserve-3d;
}

.orb-container.small {
  width: 180px;
  height: 180px;
}

.orb-container.large {
  width: 320px;
  height: 320px;
}

.orb-container:hover {
  transform: scale(1.05);
  filter: brightness(1.1);
}

/* ============================================
   INNER LAYERS (rendered first, behind glass)
   ============================================ */

/* ENVIRONMENT: Variable-based coloring */
.orb-environment {
  position: absolute;
  inset: 5px;
  border-radius: 50%;
  overflow: hidden;
  z-index: 1;
  opacity: 0;
  /* Default invisible for cross-fade */
  transition: opacity 5s ease-in-out;
  /* Smooth cross-fade */
  /* Deep void - High contrast */
  background: radial-gradient(circle at 60% 40%,
      var(--orb-bg-1) 0%,
      var(--orb-bg-2) 30%,
      var(--orb-bg-3) 70%,
      #000000 100%);
  animation: core-breathe 4s ease-in-out infinite alternate;
}

/* Active layer becomes visible */
.orb-environment.active {
  opacity: 1;
  z-index: 2;
}

/* --- Theme-specific color variables for each environment layer --- */

/* Blue (Sapphire Nebula) */
.orb-environment.blue {
  --orb-bg-1: rgba(20, 40, 80, 0.4);
  --orb-bg-2: rgba(10, 20, 50, 0.8);
  --orb-bg-3: rgba(5, 10, 20, 0.98);
  --cloud-1: rgba(100, 180, 255, 0.2);
  --cloud-2: rgba(50, 100, 200, 0.15);
  --cloud-dark: rgba(2, 5, 15, 0.8);
  --mist-1: rgba(100, 200, 255, 0.2);
  --mist-2: rgba(50, 100, 180, 0.1);
}

/* White (Quasar / Starlight) */
.orb-environment.white {
  --orb-bg-1: rgba(80, 70, 50, 0.3);
  --orb-bg-2: rgba(40, 30, 10, 0.8);
  --orb-bg-3: rgba(10, 5, 0, 0.98);
  --cloud-1: rgba(255, 240, 200, 0.25);
  --cloud-2: rgba(200, 180, 120, 0.15);
  --cloud-dark: rgba(20, 15, 5, 0.8);
  --mist-1: rgba(255, 250, 220, 0.3);
  --mist-2: rgba(200, 180, 100, 0.15);
}

/* Black (Event Horizon / Void) */
.orb-environment.black {
  --orb-bg-1: rgba(40, 20, 60, 0.3);
  --orb-bg-2: rgba(20, 5, 30, 0.9);
  --orb-bg-3: rgba(0, 0, 0, 1);
  --cloud-1: rgba(100, 50, 150, 0.15);
  --cloud-2: rgba(60, 20, 100, 0.1);
  --cloud-dark: rgba(10, 0, 20, 0.9);
  --mist-1: rgba(120, 80, 180, 0.15);
  --mist-2: rgba(80, 40, 120, 0.1);
}

/* Red (Accretion Disk) */
.orb-environment.red {
  --orb-bg-1: rgba(80, 30, 20, 0.3);
  --orb-bg-2: rgba(50, 10, 5, 0.85);
  --orb-bg-3: rgba(20, 5, 0, 0.98);
  --cloud-1: rgba(255, 100, 50, 0.2);
  --cloud-2: rgba(180, 50, 20, 0.15);
  --cloud-dark: rgba(30, 5, 0, 0.85);
  --mist-1: rgba(255, 120, 80, 0.25);
  --mist-2: rgba(200, 60, 30, 0.15);
}

/* Green (Cosmic Dust) */
.orb-environment.green {
  --orb-bg-1: rgba(20, 60, 40, 0.3);
  --orb-bg-2: rgba(5, 30, 15, 0.85);
  --orb-bg-3: rgba(0, 10, 5, 0.98);
  --cloud-1: rgba(100, 255, 150, 0.2);
  --cloud-2: rgba(50, 180, 100, 0.15);
  --cloud-dark: rgba(0, 20, 10, 0.85);
  --mist-1: rgba(120, 255, 180, 0.25);
  --mist-2: rgba(50, 200, 120, 0.15);
}

/* Storm Clouds Layer - Darker, higher contrast for better distortion */
.orb-environment::before {
  content: '';
  position: absolute;
  inset: -50%;
  background:
    radial-gradient(circle at 30% 30%, var(--cloud-1) 0%, transparent 40%),
    radial-gradient(circle at 70% 70%, var(--cloud-2) 0%, transparent 40%),
    conic-gradient(from 0deg at 50% 50%,
      transparent 0deg,
      var(--cloud-dark) 45deg,
      rgba(255, 255, 255, 0.02) 90deg,
      var(--cloud-dark) 135deg,
      transparent 180deg,
      rgba(255, 255, 255, 0.05) 225deg,
      var(--cloud-dark) 270deg,
      var(--cloud-dark) 315deg,
      transparent 360deg);
  animation: storm-churn 15s linear infinite;
  filter: url(#orb-organic-filter) contrast(1.2) brightness(1.3);
  mix-blend-mode: hard-light;
}

/* Swirling Mist Layer - Sharper edges */
.orb-environment::after {
  content: '';
  position: absolute;
  inset: -50%;
  background: conic-gradient(from 180deg at 50% 50%,
      transparent 0deg,
      var(--mist-1) 40deg,
      transparent 90deg,
      var(--mist-2) 160deg,
      transparent 220deg,
      var(--mist-1) 280deg,
      transparent 330deg,
      var(--mist-2) 360deg);
  animation: mist-swirl 10s linear infinite reverse;
  filter: url(#orb-organic-filter);
  mix-blend-mode: color-dodge;
}

/* LIGHTNING: Energy tendrils */
.orb-lightning {
  position: absolute;
  inset: 8%;
  border-radius: 50%;
  z-index: 3;
  pointer-events: none;
  overflow: hidden;
}

/* Energy tendril 1 */
.orb-lightning::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(ellipse 8% 50% at 30% 50%, var(--lightning-1) 0%, transparent 100%),
    radial-gradient(ellipse 6% 40% at 70% 40%, var(--lightning-2) 0%, transparent 100%),
    radial-gradient(ellipse 10% 30% at 50% 70%, var(--lightning-1) 0%, transparent 100%);
  animation: energy-pulse-1 3s ease-in-out infinite;
  filter: blur(2px);
}

/* Energy tendril 2 */
.orb-lightning::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(ellipse 5% 45% at 60% 30%, var(--lightning-2) 0%, transparent 100%),
    radial-gradient(ellipse 7% 35% at 35% 60%, var(--lightning-1) 0%, transparent 100%);
  animation: energy-pulse-2 4s ease-in-out infinite 1s;
  filter: blur(1px);
}

/* ============================================
   GLASS SHELL (rendered on top)
   ============================================ */

/* GLASS SHELL: Ultra transparent with edge refraction */
.orb-core {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
    radial-gradient(circle at center, transparent 40%, rgba(255, 255, 255, 0.05) 70%);
  border: 1.5px solid var(--glass-border);
  box-shadow:
    inset 0 0 60px rgba(0, 0, 0, 0.5),
    inset -10px -10px 40px rgba(0, 0, 0, 0.8),
    inset 5px 5px 20px rgba(255, 255, 255, 0.2),
    0 0 30px var(--glass-glow),
    0 0 60px var(--glass-border);
  z-index: 10;
  pointer-events: none;
  opacity: 0;
  /* Default invisible for cross-fade */
  transition: opacity 5s ease-in-out;
  /* Smooth cross-fade */
}

/* Active glass shell becomes visible */
.orb-core.active {
  opacity: 1;
}

/* Theme-specific glass colors */
.orb-core.blue {
  --glass-border: rgba(100, 180, 255, 0.4);
  --glass-glow: rgba(60, 130, 220, 0.5);
}

.orb-core.white {
  --glass-border: rgba(255, 240, 150, 0.5);
  --glass-glow: rgba(255, 200, 100, 0.6);
}

.orb-core.black {
  --glass-border: rgba(120, 80, 180, 0.4);
  --glass-glow: rgba(80, 40, 140, 0.5);
}

.orb-core.red {
  --glass-border: rgba(255, 100, 60, 0.5);
  --glass-glow: rgba(255, 60, 20, 0.6);
}

.orb-core.green {
  --glass-border: rgba(100, 220, 130, 0.5);
  --glass-glow: rgba(50, 180, 80, 0.6);
}

/* Glass highlight 1 */
.orb-core::before {
  content: '';
  position: absolute;
  top: 15%;
  left: 20%;
  width: 25%;
  height: 15%;
  border-radius: 50%;
  background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0) 70%);
  transform: rotate(-45deg);
  opacity: 0.7;
  filter: blur(5px);
  animation: shine-pulse 4s ease-in-out infinite;
}

/* Glass highlight 2 */
.orb-core::after {
  content: '';
  position: absolute;
  bottom: 15%;
  right: 20%;
  width: 15%;
  height: 8%;
  border-radius: 50%;
  background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0) 70%);
  transform: rotate(-45deg);
  opacity: 0.4;
  filter: blur(3px);
}

/* OUTER AURA: Soft ethereal glow */
.orb-fog-layer {
  position: absolute;
  inset: -40px;
  border-radius: 50%;
  z-index: 0;
  pointer-events: none;
  background: radial-gradient(circle at 50% 50%,
      var(--aura-color) 0%,
      transparent 70%);
  filter: blur(25px);
  opacity: 0;
  /* Default invisible for cross-fade */
  transition: opacity 5s ease-in-out;
  /* Smooth cross-fade */
  animation: aura-pulse 6s ease-in-out infinite alternate;
}

/* Active fog layer becomes visible */
.orb-fog-layer.active {
  opacity: 0.6;
}

/* Theme-specific aura colors */
.orb-fog-layer.blue {
  --aura-color: rgba(60, 130, 220, 0.5);
}

.orb-fog-layer.white {
  --aura-color: rgba(255, 200, 100, 0.5);
}

.orb-fog-layer.black {
  --aura-color: rgba(100, 50, 150, 0.4);
}

.orb-fog-layer.red {
  --aura-color: rgba(255, 80, 30, 0.6);
}

.orb-fog-layer.green {
  --aura-color: rgba(50, 200, 100, 0.5);
}

/* Rotating outer glow */
.orb-fog-layer::after {
  content: '';
  position: absolute;
  inset: 10px;
  border-radius: 50%;
  background: conic-gradient(from 0deg,
      transparent 0deg,
      var(--aura-color) 90deg,
      transparent 180deg,
      var(--aura-color) 270deg,
      transparent 360deg);
  filter: blur(30px);
  opacity: 0.4;
  animation: aura-rotate 20s linear infinite;
}

/* PLASMA / SHIMMER */
.orb-plasma {
  position: absolute;
  inset: 5%;
  border-radius: 50%;
  background: conic-gradient(from 180deg,
      transparent 0deg,
      rgba(216, 180, 254, 0.3) 40deg,
      transparent 80deg,
      rgba(139, 92, 246, 0.2) 160deg,
      transparent 240deg);
  filter: blur(8px);
  mix-blend-mode: overlay;
  animation: plasma-rotate 6s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* RUNIC LAYERS - Hidden */
.orb-runes-layer {
  display: none;
}

.orb-ring {
  /* Legacy class kept for structure but styled as faint glow ring */
  position: absolute;
  inset: -5px;
  border-radius: 50%;
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
  opacity: 0.5;
  animation: breathe 3s ease-in-out infinite;
}

/* PARTICLES: MANA EMBERS */
.orb-particles {
  position: absolute;
  inset: -40px;
  pointer-events: none;
}

.orb-particles::before,
.orb-particles::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 4px;
  background: #fcd34d;
  /* Amber/Gold embers */
  border-radius: 50%;
  box-shadow: 0 0 8px #fcd34d;
  opacity: 0;
}

.orb-particles::before {
  bottom: 0;
  left: 30%;
  animation: ember-float 4s ease-out infinite;
}

.orb-particles::after {
  bottom: 0;
  right: 30%;
  animation: ember-float 5s ease-out infinite 1.5s;
}

/* TEXT */
.orb-text {
  font-family: 'Cinzel', serif;
  /* Or system serif for wizardy feel */
  font-size: 1.125rem;
  letter-spacing: 0.05em;
  color: #c4b5fd;
  text-align: center;
  text-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
  margin-top: 1rem;
}

/* READY STATE - GOLDEN GLOW */
.orb-container.ready .orb-core {
  background: radial-gradient(circle at 40% 40%, #fef08a 0%, #ca8a04 40%, #854d0e 80%, #422006 100%);
  box-shadow: 0 0 60px rgba(250, 204, 21, 0.6), inset 0 0 30px rgba(255, 255, 255, 0.5);
  animation: core-pulse-chaos 2s ease-in-out infinite;
}

.orb-container.ready .orb-runes-layer::before,
.orb-container.ready .orb-runes-layer::after {
  border-color: rgba(250, 204, 21, 0.5);
  box-shadow: 0 0 15px rgba(250, 204, 21, 0.3);
}

.orb-text.ready {
  color: #fcd34d;
  text-shadow: 0 0 15px rgba(250, 204, 21, 0.8);
}


/* CRACKING / REVEAL ANIMATIONS */
.orb-container.cracking .orb-core {
  animation: explode 0.5s ease-out forwards;
}

.orb-container.cracking .orb-fog-layer {
  animation: fog-explode 0.5s ease-out forwards;
}

.orb-container.cracking .orb-runes-layer {
  animation: rune-explode 0.4s ease-out forwards;
}

.orb-container.cracking .orb-plasma {
  animation: explode 0.5s ease-out forwards;
}

.orb-container.cracking .orb-particles {
  animation: particles-scatter 0.5s ease-out forwards;
}

.orb-container.cracking .orb-cracks {
  animation: cracks-reveal 0.5s cubic-bezier(0.1, 0, 0.3, 1) forwards;
}

/* READY STATE - Show pulsing light pulse */
.orb-container.ready .orb-cracks {
  opacity: 1;
  transform: scale(1);
  animation: none;
}

.orb-container.ready .orb-cracks::before {
  animation: energy-pulse 2s ease-in-out infinite alternate;
}

/* Animate the Pseudo-elements specifically */
.orb-container.cracking .orb-cracks::before {
  animation: burst-core 0.5s cubic-bezier(0.1, 0, 0.3, 1) forwards;
}

.orb-container.cracking .orb-cracks::after {
  animation: burst-rays 0.5s cubic-bezier(0.1, 0, 0.3, 1) forwards;
}

/* LIGHT BURST / CRACKS LAYER REIMAGINED */
.orb-cracks {
  position: absolute;
  inset: -50%;
  z-index: 20;
  pointer-events: none;
  opacity: 0;
  mix-blend-mode: plus-lighter;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Core Burst */
.orb-cracks::before {
  content: '';
  position: absolute;
  width: 20%;
  height: 20%;
  background: radial-gradient(circle, #ffffff 0%, #a5f3fc 40%, transparent 70%);
  border-radius: 50%;
  filter: blur(10px);
  opacity: 0;
}

/* God Rays */
.orb-cracks::after {
  content: '';
  position: absolute;
  inset: 0;
  background: conic-gradient(from 0deg,
      transparent 0deg,
      rgba(255, 255, 255, 0.8) 10deg,
      transparent 20deg,
      transparent 40deg,
      rgba(255, 255, 255, 0.6) 45deg,
      transparent 50deg,
      transparent 80deg,
      rgba(255, 255, 255, 0.9) 90deg,
      transparent 100deg,
      transparent 140deg,
      rgba(255, 255, 255, 0.7) 160deg,
      transparent 180deg,
      transparent 220deg,
      rgba(255, 255, 255, 0.8) 240deg,
      transparent 260deg,
      transparent 300deg,
      rgba(255, 255, 255, 0.6) 320deg,
      transparent 360deg);
  mask-image: radial-gradient(circle, transparent 10%, black 60%);
  -webkit-mask-image: radial-gradient(circle, transparent 10%, black 60%);
  opacity: 0;
  transform: scale(0.5);
}

.orb-container.cracking .orb-cracks svg {
  animation: cracks-expand 0.5s ease-out forwards;
}

.orb-cracks svg {
  position: absolute;
  width: 100%;
  height: 100%;
  transform-origin: center;
  filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 5px cyan);
  opacity: 0;
}

@keyframes cracks-expand {
  0% {
    transform: scale(0.9);
    opacity: 0;
    stroke-width: 0.2;
    stroke-dasharray: 1;
    stroke-dashoffset: 1;
    /* Requires pathLength="1" on SVG */
  }

  /* Rapid "drawing" of cracks */
  30% {
    opacity: 1;
    stroke-dashoffset: 0;
    /* Fully drawn */
    stroke-width: 0.8;
  }

  100% {
    transform: scale(3);
    opacity: 0;
    stroke-width: 4;
    stroke-dashoffset: 0;
  }
}

@keyframes cracks-reveal {
  0% {
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  20% {
    opacity: 1;
  }

  /* Longer afterimage */
  100% {
    opacity: 0;
  }
}

@keyframes burst-core {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  /* Shockwave expansion */
  60% {
    opacity: 0.8;
    transform: scale(25);
  }

  100% {
    opacity: 0;
    transform: scale(30);
  }
}

@keyframes burst-rays {
  0% {
    transform: scale(0.5) rotate(0deg);
    opacity: 0;
  }

  20% {
    opacity: 1;
  }

  /* Dynamic rotation */
  100% {
    transform: scale(2.5) rotate(180deg);
    opacity: 0;
  }
}

@keyframes energy-pulse {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }

  100% {
    opacity: 0.3;
    transform: scale(1.2);
  }
}



/* ANIMATIONS */

/* Core luminous breathing */
@keyframes core-breathe {

  0%,
  100% {
    filter: brightness(1);
  }

  50% {
    filter: brightness(1.2);
  }
}

/* Smoke flowing organically */
@keyframes smoke-flow-1 {
  0% {
    transform: rotate(0deg) scale(1) translate(0, 0);
  }

  25% {
    transform: rotate(8deg) scale(1.1) translate(5%, -3%);
  }

  50% {
    transform: rotate(-5deg) scale(0.95) translate(-3%, 5%);
  }

  75% {
    transform: rotate(10deg) scale(1.05) translate(3%, 2%);
  }

  100% {
    transform: rotate(0deg) scale(1) translate(0, 0);
  }
}

/* Storm clouds churning */
@keyframes storm-churn {
  0% {
    transform: rotate(0deg) scale(1) translate(0, 0);
  }

  20% {
    transform: rotate(12deg) scale(1.15) translate(8%, -5%);
  }

  40% {
    transform: rotate(-8deg) scale(0.9) translate(-5%, 8%);
  }

  60% {
    transform: rotate(15deg) scale(1.1) translate(5%, 3%);
  }

  80% {
    transform: rotate(-10deg) scale(1.05) translate(-8%, -3%);
  }

  100% {
    transform: rotate(0deg) scale(1) translate(0, 0);
  }
}

/* Mist swirl rotation */
@keyframes mist-swirl {
  0% {
    transform: rotate(0deg);
    opacity: 0.8;
  }

  50% {
    opacity: 1;
  }

  100% {
    transform: rotate(360deg);
    opacity: 0.8;
  }
}

/* Ethereal mist swirl */
@keyframes smoke-swirl {
  0% {
    transform: rotate(0deg);
    opacity: 0.7;
  }

  50% {
    opacity: 1;
  }

  100% {
    transform: rotate(360deg);
    opacity: 0.7;
  }
}

/* Energy tendril pulse */
@keyframes energy-pulse-1 {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1);
  }

  15% {
    opacity: 1;
    transform: scale(1.1);
  }

  30% {
    opacity: 0.2;
  }

  45% {
    opacity: 0.9;
    transform: scale(1.05);
  }

  60% {
    opacity: 0.4;
  }
}

@keyframes energy-pulse-2 {

  0%,
  100% {
    opacity: 0.2;
    transform: scale(1) rotate(0deg);
  }

  20% {
    opacity: 0.95;
    transform: scale(1.15) rotate(5deg);
  }

  40% {
    opacity: 0.3;
  }

  70% {
    opacity: 0.85;
    transform: scale(1.08) rotate(-3deg);
  }
}

/* Glass shine pulse */
@keyframes shine-pulse {

  0%,
  100% {
    opacity: 0.8;
  }

  50% {
    opacity: 1;
  }
}

/* Outer aura glow */
@keyframes aura-pulse {

  0%,
  100% {
    opacity: 0.6;
    transform: scale(1);
  }

  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

@keyframes aura-rotate {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/* Legacy animations kept for compatibility */
@keyframes fog-swirl {
  0% {
    transform: rotate(0deg) scale(1);
  }

  50% {
    transform: rotate(180deg) scale(1.1);
  }

  100% {
    transform: rotate(360deg) scale(1);
  }
}

@keyframes core-pulse-chaos {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }

  25% {
    transform: scale(0.98);
    filter: brightness(0.9);
  }

  50% {
    transform: scale(1.02);
    filter: brightness(1.1);
  }

  75% {
    transform: scale(0.99);
    filter: brightness(1.2);
  }

  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

@keyframes mist-swirl {
  0% {
    transform: rotate(0deg);
    opacity: 0.6;
  }

  50% {
    opacity: 0.9;
  }

  100% {
    transform: rotate(360deg);
    opacity: 0.6;
  }
}

@keyframes glass-shimmer {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.85;
  }
}

@keyframes lightning-bolt-1 {

  0%,
  88% {
    opacity: 0;
    transform: rotate(25deg) scaleY(0.8);
  }

  89% {
    opacity: 1;
    transform: rotate(25deg) scaleY(1);
    filter: brightness(2);
  }

  91% {
    opacity: 0.3;
  }

  93% {
    opacity: 1;
    filter: brightness(3);
  }

  95%,
  100% {
    opacity: 0;
    transform: rotate(25deg) scaleY(1);
  }
}

@keyframes lightning-bolt-2 {

  0%,
  85% {
    opacity: 0;
    transform: rotate(-20deg) scaleY(0.7);
  }

  86% {
    opacity: 1;
    transform: rotate(-20deg) scaleY(1);
    filter: brightness(2.5);
  }

  88% {
    opacity: 0.2;
  }

  90% {
    opacity: 0.9;
    filter: brightness(2);
  }

  92%,
  100% {
    opacity: 0;
  }
}

@keyframes plasma-rotate {
  0% {
    transform: rotate(0deg);
    opacity: 0.5;
  }

  50% {
    opacity: 0.8;
  }

  100% {
    transform: rotate(360deg);
    opacity: 0.5;
  }
}

@keyframes rune-spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes ember-float {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0;
  }

  20% {
    opacity: 1;
  }

  100% {
    transform: translateY(-150px) translateX(20px) scale(0);
    opacity: 0;
  }
}

@keyframes breathe {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1);
  }

  50% {
    opacity: 0.6;
    transform: scale(1.05);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes explode {
  0% {
    transform: scale(1);
    opacity: 1;
    filter: brightness(1);
  }

  40% {
    transform: scale(1.4);
    filter: brightness(4);
  }

  100% {
    transform: scale(3);
    opacity: 0;
    filter: brightness(10);
  }
}

@keyframes fog-explode {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes rune-explode {
  0% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: scale(2.5) rotate(180deg);
    opacity: 0;
    border-color: white;
  }
}

@keyframes particles-scatter {
  0% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(4);
    opacity: 0;
  }
}

/* Loading Icon Bounce */
.orb-loading-icon {
  font-size: 2rem;
  animation: icon-bounce 1s ease-in-out infinite;
  display: inline-block;
}

@keyframes icon-bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-5px);
  }
}

/* Animation for RIGHT-side cards (moves LEFT towards center) */
@keyframes insert-slot-from-right {
  0% {
    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0) scale(1);
    opacity: 1;
    filter: brightness(1) blur(0);
  }

  25% {
    transform: translate3d(calc(-10%), -50px, 150px) rotateX(20deg) rotateY(-10deg) scale(1.1);
    filter: brightness(1.2);
  }

  50% {
    transform: translate3d(calc(-50%), -200px, 0px) rotateX(60deg) rotateY(-5deg) scale(0.9);
    opacity: 1;
  }

  /* Deep Dive: Maintain elevation, just go deep */
  85% {
    transform: translate3d(calc(-50%), -220px, -2000px) rotateX(75deg) rotateY(0deg) scale(0.1);
    opacity: 1;
    filter: brightness(3) blur(1px);
  }

  /* IMPACT: Hit the core (approx -230px Y relative to start) */
  98% {
    transform: translate3d(calc(-50%), -230px, -4500px) rotateX(88deg) rotateY(0deg) scale(0.01);
    opacity: 1;
    filter: brightness(10) blur(2px);
  }

  /* Singularity */
  100% {
    transform: translate3d(calc(-50%), -230px, -5000px) rotateX(90deg) rotateY(0deg) scale(0);
    opacity: 0;
    filter: brightness(20) blur(2px);
  }
}

/* Animation for LEFT-side cards (moves RIGHT towards center) */
@keyframes insert-slot-from-left {
  0% {
    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0) scale(1);
    opacity: 1;
    filter: brightness(1) blur(0);
  }

  25% {
    transform: translate3d(calc(10%), -50px, 150px) rotateX(20deg) rotateY(10deg) scale(1.1);
    filter: brightness(1.2);
  }

  50% {
    transform: translate3d(calc(50%), -200px, 0px) rotateX(60deg) rotateY(5deg) scale(0.9);
    opacity: 1;
  }

  85% {
    transform: translate3d(calc(50%), -220px, -2000px) rotateX(75deg) rotateY(0deg) scale(0.1);
    opacity: 1;
    filter: brightness(3) blur(1px);
  }

  98% {
    transform: translate3d(calc(50%), -230px, -4500px) rotateX(88deg) rotateY(0deg) scale(0.01);
    opacity: 1;
    filter: brightness(10) blur(2px);
  }

  100% {
    transform: translate3d(calc(50%), -230px, -5000px) rotateX(90deg) rotateY(0deg) scale(0);
    opacity: 0;
    filter: brightness(20) blur(2px);
  }
}

/* Default insert animation (for right-side cards) */
.animate-insert-slot {
  animation: insert-slot-from-right 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  transform-style: preserve-3d;
  z-index: 50;
  position: relative;
}

/* Insert animation for left-side cards */
.animate-insert-slot-left {
  animation: insert-slot-from-left 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  transform-style: preserve-3d;
  z-index: 50;
  position: relative;
}

.orb-container.absorbing {
  animation: orb-grow-pulse 0.4s ease-out;
}

@keyframes orb-grow-pulse {
  0% {
    transform: scale(1);
  }

  40% {
    transform: scale(1.15) rotate(5deg);
    filter: brightness(1.5) hue-rotate(15deg);
  }

  100% {
    transform: scale(1);
  }
}

/* Card Flip Animation */
@keyframes card-flip {
  0% {
    transform: rotateY(0deg);
  }

  100% {
    transform: rotateY(180deg);
  }
}

.animate-card-flip {
  animation: card-flip 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Card 3D Setup - REQUIRED for Z-axis depth to work */
.card-3d-wrapper {
  perspective: 500px !important;
  /* Enforce perspective */
}

.card-3d-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}



.card-face-front,
.card-face-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  top: 0;
  left: 0;
  border-radius: 0.75rem;
}

.card-face-back {
  transform: rotateY(180deg);
  background: linear-gradient(135deg, #020617 0%, #2e1065 50%, #020617 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(139, 92, 246, 0.5);
}

.card-face-back::after {
  content: '';
  position: absolute;
  inset: 8px;
  border: 1px dashed rgba(167, 139, 250, 0.2);
  border-radius: 0.5rem;
}

/* Hide decorative styling when custom content is present */
.card-face-back.has-custom-content {
  background: none !important;
  border: none !important;
  display: block !important;
  align-items: initial !important;
  justify-content: initial !important;
  opacity: 1 !important;
  backface-visibility: visible !important;
}

.card-face-back.has-custom-content::after {
  display: none !important;
}

.card-face-back.has-custom-content>div {
  position: relative;
  z-index: 100;
  opacity: 1;
  backface-visibility: visible !important;
}

/* ============================================
   COMMANDER SUMMONING ANIMATION
   ============================================ */

@keyframes commander-summon {
  0% {
    opacity: 0;
    transform: scale(0.3) rotateY(180deg);
    filter: blur(20px) brightness(3);
  }

  30% {
    opacity: 1;
    filter: blur(10px) brightness(2);
  }

  60% {
    transform: scale(1.1) rotateY(0deg);
    filter: blur(2px) brightness(1.5);
  }

  80% {
    transform: scale(0.95) rotateY(0deg);
  }

  100% {
    opacity: 1;
    transform: scale(1) rotateY(0deg);
    filter: blur(0) brightness(1);
  }
}

.animate-commander-summon {
  animation: commander-summon 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  transform-style: preserve-3d;
}